/* Responsive carousel container */
.carousel {
    display: flex;
    flex-wrap: nowrap;
    overflow-x: auto;
    overflow-y: hidden;
    scroll-snap-type: x mandatory;
    gap: 32px;
    width: 100%;
    min-height: 340px;
    box-sizing: border-box;
    padding-bottom: 32px;
    padding-left: 20px;
    padding-right: 20px;
}

/* Scrollbar du caroussel horizontal */
.carousel::-webkit-scrollbar {
    height: 8px;
}
.carousel::-webkit-scrollbar-thumb {
    background: var(--lilac-ash);
    border-radius: 10px;
}
.carousel::-webkit-scrollbar-track {
    background: var(--space-indigo);
}

/* --- STYLE DES IMAGES (Face Avant) --- */
.carousel img {
    width: 90%;
    max-width: 280px; 
    max-height: 160px; /* Ajusté légèrement pour laisser place aux boutons */
    object-fit: contain;
    border-radius: 12px;
    margin: 10px auto 10px auto;
    display: block;
    box-shadow: 0 4px 8px rgba(0,0,0,0.4);
}

/* --- STRUCTURE DE LA CARTE --- */
.flip-card {
    flex: 0 0 auto;
    width: 30vw;
    min-width: 320px;
    max-width: 420px;
    height: 580px; /* Hauteur ajustée pour le contenu */
    perspective: 1000px;
    /* Suppression du curseur pointer global car le clic ne fait plus rien sur la carte entière */
    cursor: default; 
    scroll-snap-align: center;
    position: relative;
}

.flip-card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    transition: transform 0.6s cubic-bezier(.4,2,.3,1);
    transform-style: preserve-3d;
}

/* IMPORTANT : J'ai supprimé les règles :active, :focus qui retournaient la carte.
   Seule la classe JavaScript '.flipped' active le retournement maintenant.
*/
.flip-card.flipped .flip-card-inner {
    transform: rotateY(180deg);
}

/* --- FACES AVANT ET ARRIÈRE (Commun) --- */
.flip-card-front, .flip-card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border-radius: 12px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.5);
    border: 1px solid var(--border-color);
    box-sizing: border-box;
}

/* FACE AVANT */
.flip-card-front {
    background: var(--dusty-grape);
    color: var(--parchment);
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    padding: 24px;
    text-align: center;
    overflow: hidden;
}

/* FACE ARRIÈRE */
.flip-card-back {
    transform: rotateY(180deg);
    background: var(--space-indigo);
    color: var(--parchment);
    padding: 24px;
    text-align: left;
    
    /* Layout Flex pour la face arrière pour bien placer le bouton Retour */
    display: flex;
    flex-direction: column;
}

/* Wrapper pour le contenu texte de la face arrière afin qu'il scroll sans cacher le bouton */
.flip-card-back h3, .flip-card-back p, .flip-card-back .project-section {
    /* Ces éléments défilent naturellement si besoin, mais on préfère scroller le conteneur */
}

/* On force le contenu à prendre la place disponible, le bouton reste en bas */
.flip-card-back {
    overflow-y: hidden; /* On gère le scroll sur un sous-conteneur si besoin, ou on laisse auto global */
    overflow-y: auto; /* Gardons le scroll global simple pour l'instant */
    scrollbar-width: thin;
    scrollbar-color: var(--lilac-ash) var(--space-indigo);
}
.flip-card-back::-webkit-scrollbar {
    width: 6px;
}
.flip-card-back::-webkit-scrollbar-thumb {
    background-color: var(--lilac-ash);
    border-radius: 3px;
}

/* Styles des titres (Face Avant) */
.flip-card-front h2 {
    margin-top: 5px;
    font-size: 1.5em;
    color: var(--almond-silk);
    border-bottom: 2px solid var(--lilac-ash);
    padding-bottom: 8px;
    margin-bottom: 8px;
    width: 100%;
}

.flip-card-front .date-range {
    color: var(--lilac-ash);
    font-weight: 500;
    margin-bottom: 10px;
    font-size: 0.95em;
}

/* Styles des titres (Face Arrière) */
.flip-card-back h3 {
    color: var(--almond-silk);
    margin-top: 0;
    margin-bottom: 15px;
    font-size: 1.4em;
    border-bottom: 1px solid var(--lilac-ash);
    padding-bottom: 5px;
}

/* --- SECTIONS INTERNES (Back) --- */
.flip-card-back .project-section {
    margin-top: 20px;
    padding: 15px;
    border: 1px solid var(--dusty-grape);
    border-radius: 6px;
    background-color: rgba(74, 78, 105, 0.3);
    margin-bottom: 20px; /* Espace avant le bouton retour */
}

.flip-card-back .project-section p {
    font-weight: 600;
    color: var(--almond-silk);
    margin-top: 15px;
    margin-bottom: 8px;
    border-bottom: 1px dashed var(--lilac-ash);
    padding-bottom: 4px;
    font-size: 1.1em;
}
.flip-card-back .project-section p:first-child {
    margin-top: 0;
}

.flip-card-back ul {
    color: var(--parchment);
    margin-left: 20px; 
    font-size: 0.95em;
    list-style: square;
}
.flip-card-back ul li {
    margin-bottom: 4px;
}

/* --- NOUVEAUX BOUTONS --- */

/* Conteneur pour aligner les boutons en bas de la face avant */
.card-actions {
    margin-top: auto; /* Pousse les boutons vers le bas */
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* Bouton Description (déclenche le flip) */
.flip-btn-description {
    width: 100%;
    padding: 12px 0;
    background-color: transparent;
    color: var(--almond-silk);
    border: 2px solid var(--lilac-ash);
    border-radius: 8px;
    font-weight: 700;
    font-size: 1em;
    cursor: pointer;
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.flip-btn-description:hover {
    background-color: var(--lilac-ash);
    color: var(--space-indigo);
    transform: translateY(-2px);
}

/* Bouton GitHub (Style existant ajusté) */
.github-card-btn {
    display: block;
    width: 100%;
    padding: 12px 0;
    background-color: var(--lilac-ash);
    color: var(--space-indigo);
    text-align: center;
    text-decoration: none;
    font-weight: 700;
    border-radius: 8px;
    border: 1px solid var(--parchment);
    transition: all 0.3s ease;
    box-shadow: 0 4px 6px rgba(0,0,0,0.2);
    font-size: 1em;
}

.github-card-btn:hover {
    background-color: var(--parchment);
    color: var(--space-indigo);
    transform: translateY(-2px);
}

/* Bouton Retour (Face Arrière) */
.flip-btn-return {
    display: block;
    width: 100%;
    margin-top: auto; /* S'assure qu'il est en bas si Flexbox est actif */
    padding: 12px 0;
    background-color: var(--dusty-grape);
    color: var(--parchment);
    border: 1px solid var(--lilac-ash);
    border-radius: 8px;
    font-weight: 600;
    font-size: 1em;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-bottom: 0;
}

.flip-btn-return:hover {
    background-color: var(--almond-silk);
    color: var(--space-indigo);
}


/* --- INDICATEUR VISUEL (Optionnel mais gardé pour le style) --- */
/* J'ai changé le contenu pour 'Info' au lieu de 'Au dos' puisque c'est un bouton maintenant */
.flip-card-front::after {
    content: 'i'; 
    position: absolute;
    top: 12px;         
    right: 12px;       
    z-index: 10;       
    background-color: rgba(34, 34, 59, 0.8);
    color: var(--almond-silk);
    border: 1px solid var(--lilac-ash);
    width: 25px;
    height: 25px;
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 50%;
    font-size: 0.9em;
    font-weight: bold;
    font-family: serif;
    pointer-events: none; 
}

/* On cache l'indicateur quand la carte est retournée */
.flip-card.flipped .flip-card-front::after {
    opacity: 0;
    transition: opacity 0.2s;
}

/* --- MEDIA QUERIES --- */

@media (min-width: 1400px) {
    .flip-card {
        height: 620px; 
        width: 400px;
    }
}

@media (max-width: 1200px) {
    .flip-card-front h2 { font-size: 1.4em; }
    .flip-card-back { padding: 18px; }
}

/* --- VERSION MOBILE --- */
@media (max-width: 850px) {

    .carousel {
        flex-direction: column;
        overflow-x: hidden;
        overflow-y: visible;
        height: auto;
        padding-bottom: 0;
        scroll-snap-type: none;
        gap: 40px; /* Plus d'espace entre les cartes */
        align-items: center;
    }

    .flip-card {
        flex: 0 0 auto;
        width: 90vw;
        max-width: 400px;
        height: auto; /* Hauteur auto pour s'adapter au contenu si besoin */
        min-height: 580px; 
        margin-bottom: 20px;
    }

    .flip-card-front h2 { font-size: 1.4em; }

    .carousel img {
        max-width: 200px;
        max-height: 150px;
        margin-bottom: 10px;
    }
    
    /* Sur mobile, on s'assure que les boutons sont bien larges */
    .card-actions {
        width: 100%;
    }
}